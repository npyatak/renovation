<?php

use yii\db\Migration;

class m171020_130535_create_table_region extends Migration
{
    public function safeUp() {
        $tableOptions = null;
        if ($this->db->driverName === 'mysql') {
            // http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci
            $tableOptions = 'CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=InnoDB';
        }

        $this->createTable('{{%region}}', [
            'id' => $this->primaryKey(),
            'district_id' => $this->integer()->notNull(),
            'name' => $this->string(),
            'coordinates' => $this->text(),

        ], $tableOptions);
        
        $this->addForeignKey("{region}_district_id_fkey", '{{%region}}', 'district_id', '{{%district}}', 'id', 'CASCADE', 'CASCADE');

        $this->batchInsert('{{%region}}', ['id', 'name', 'district_id'/*, 'coordinates'*/], [
            [1, 'Академический', 7],
            [2, 'Алексеевский', 3],
            [3, 'Алтуфьевский', 3],
            [4, 'Арбат', 1],
            [5, 'Аэропорт',  2],
            [6, 'Бабушкинский', 3],
            [7, 'Басманный',   1 ],
            [8, 'Беговой', 2 ],
            [9, 'Бескудниковский', 2],
            [10, 'Бибирево', 3],
            [11, 'Бирюлёво Восточное', 6],
            [12, 'Бирюлёво Западное', 6],
            [13, 'Богородское', 4],
            [14, 'Братеево', 6],
            [15, 'Бутырский', 3],
            [16, 'Вешняки', 4],
            [17, 'Внуково', 8],
            [18, 'Войковский', 2],
            [19, 'Восточное Дегунино', 2],
            [20, 'Восточное Измайлово', 4],
            [21, 'Восточный', 4],
            [22, 'Выхино-Жулебино', 5],
            [23, 'Гагаринский', 7],
            [24, 'Головинский', 2],
            [25, 'Гольяново', 4],
            [26, 'Даниловский', 6],
            [27, 'Дмитровский', 2],
            [28, 'Донской', 6],
            [29, 'Дорогомилово', 8],
            [30, 'Замоскворечье', 1],
            [31, 'Западное Дегунино', 2],
            [32, 'Зюзино', 7],
            [33, 'Зябликово', 6],
            [34, 'Ивановское', 4],
            [35, 'Измайлово', 4],
            [36, 'Капотня', 5],
            [37, 'Коньково', 7],
            [38, 'Коптево', 2],
            [39, 'Косино-Ухтомский', 4],
            [40, 'Котловка', 7],
            [41, 'Красносельский', 1],
            [42, 'Крылатское', 8],
            [43, 'Крюково', 10],
            [44, 'Кузьминки',   5],
            [45, 'Кунцево', 8 ],
            [46, 'Куркино', 9],
            [47, 'Левобережный',    2],
            [48, 'Лефортово',   5],
            [49, 'Лианозово',   3],
            [50, 'Ломоносовский',   7],
            [51, 'Лосиноостровский',    3],
            [52, 'Люблино', 5],
            [53, 'Марфино', 3],
            [54, 'Марьина Роща',     3],
            [55, 'Марьино', 5],
            [56, 'Матушкино',   10],
            [57, 'Метрогородок',    4],
            [58, 'Мещанский',   1],
            [59, 'Митино',  9],
            [60, 'Можайский',   8],
            [61, 'Молжаниновский',  2],
            [62, 'Москворечье-Сабурово', 6],
            [63, 'Нагатино-Садовники',  6],
            [64, 'Нагатинский Затон', 6],
            [65, 'Нагорный',    6],
            [66, 'Некрасовка',  5],
            [67, 'Нижегородский',   5],
            [68, 'Ново-Переделкино', 8],
            [69, 'Новогиреево', 4],
            [70, 'Новокосино',  4],
            [71, 'Обручевский', 7],
            [72, 'Орехово-Борисово Северное',   6],
            [73, 'Орехово-Борисово Южное',  6],
            [74, 'Останкинский',    3],
            [75, 'Отрадное',    3],
            [76, 'Очаково-Матвеевское', 8 ],
            [77, 'Перово',  4],
            [78, 'Печатники',   5],
            [79, 'Покровское-Стрешнево',    9],
            [80, 'Преображенское',  4],
            [81, 'Пресненский', 1],
            [82, 'Проспект Вернадского', 8 ],
            [83, 'Раменки', 8 ],
            [84, 'Ростокино',   3],
            [85, 'Рязанский',   5],
            [86, 'Савёлки', 10],
            [87, 'Савёловский', 2],
            [88, 'Свиблово',    3],
            [89, 'Северное Бутово', 7],
            [90, 'Северное Измайлово',  4],
            [91, 'Северное Медведково', 3],
            [92, 'Северное Тушино', 9],
            [93, 'Северный', 3],
            [94, 'Силино', 10],
            [95, 'Сокол', 2],
            [96, 'Соколиная Гора',  4 ],
            [97, 'Сокольники', 4],
            [98, 'Солнцево', 8],
            [99, 'Старое Крюково', 10],
            [100, 'Строгино', 9],
            [101, 'Таганский', 1],
            [102, 'Тверской', 1],
            [103, 'Текстильщики', 5],
            [104, 'Тёплый Стан', 7],
            [105, 'Тимирязевский', 2],
            [106, 'Тропарёво-Никулино', 8],
            [107, 'Филёвский Парк', 8],
            [108, 'Фили-Давыдково', 8],
            [109, 'Хамовники', 1],
            [110, 'Ховрино', 2],
            [111, 'Хорошёво-Мнёвники', 9],
            [112, 'Хорошёвский', 2],
            [113, 'Царицыно', 6],
            [114, 'Черёмушки', 7],
            [115, 'Чертаново Северное', 6],
            [116, 'Чертаново Центральное', 6],
            [117, 'Чертаново Южное', 6],
            [118, 'Щукино', 9],
            [119, 'Южное Бутово',  7],
            [120, 'Южное Медведково', 3],
            [121, 'Южное Тушино', 9],
            [122, 'Южнопортовый', 5],
            [123, 'Якиманка', 1],
            [124, 'Ярославский', 3],
            [125, 'Ясенево', 7],
            [126, 'Троицк',  11],
            [127, 'Щербинка', 11],
            [128, 'Мосрентген', 11],
            [129, 'Внуковское', 11],
            [130, 'Вороновское', 11],
            [131, 'Воскресенское', 11],
            [132, 'Десёновское', 11],
            [133, 'Киевский', 11],
            [134, 'Клёновское', 11],
            [135, 'Кокошкино', 11],
            [136, 'Краснопахорское', 11],
            [137, 'Марушкинское', 11],
            [138, 'Михайлово-Ярцевское', 11],
            [139, 'Московский',  11],
            [140, 'Новофёдоровское', 11],
            [141, 'Первомайское', 11],
            [142, 'Роговское',   11],
            [143, 'Рязановское', 11],
            [144, 'Сосенское', 11],
            [145, 'Филимонковское', 11],
            [146, 'Щаповское', 11],
        ]);
    }

    public function safeDown() {
        $this->dropTable('{{%region}}');
    }
}
