<?php

use yii\db\Migration;

class m171020_130535_create_table_region extends Migration
{
    public function safeUp() {
        $tableOptions = null;
        if ($this->db->driverName === 'mysql') {
            // http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci
            $tableOptions = 'CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=InnoDB';
        }

        $this->createTable('{{%region}}', [
            'id' => $this->primaryKey(),
            'district_id' => $this->integer()->notNull(),
            'name' => $this->string(),
            'coordinates' => $this->text(),

        ], $tableOptions);
        
        $this->addForeignKey("{region}_district_id_fkey", '{{%region}}', 'district_id', '{{%district}}', 'id', 'CASCADE', 'CASCADE');

        $this->batchInsert('{{%region}}', ['name', 'district_id'/*, 'coordinates'*/], [
            ['Академический', 7],
            ['Алексеевский', 3],
            ['Алтуфьевский', 3],
            ['Арбат', 1],
            ['Аэропорт',  2],
            ['Бабушкинский', 3],
            ['Басманный',   1 ],
            ['Беговой', 2 ],
            ['Бескудниковский', 2],
            ['Бибирево', 3],
            ['Бирюлёво Восточное', 6],
            ['Бирюлёво Западное', 6],
            ['Богородское', 4],
            ['Братеево', 6],
            ['Бутырский', 3],
            ['Вешняки', 4],
            ['Внуково', 8],
            ['Войковский', 2],
            ['Восточное Дегунино', 2],
            ['Восточное Измайлово', 4],
            ['Восточный', 4],
            ['Выхино-Жулебино', 5],
            ['Гагаринский', 7],
            ['Головинский', 2],
            ['Гольяново', 4],
            ['Даниловский', 6],
            ['Дмитровский', 2],
            ['Донской', 6],
            ['Дорогомилово', 8],
            ['Замоскворечье', 1],
            ['Западное Дегунино', 2],
            ['Зюзино', 7],
            ['Зябликово', 6],
            ['Ивановское', 4],
            ['Измайлово', 4],
            ['Капотня', 5],
            ['Коньково', 7],
            ['Коптево', 2],
            ['Косино-Ухтомский', 4],
            ['Котловка', 7],
            ['Красносельский', 1],
            ['Крылатское', 8],
            ['Крюково', 10],
            ['Кузьминки',   5],
            ['Кунцево', 8 ],
            ['Куркино', 9],
            ['Левобережный',    2],
            ['Лефортово',   5],
            ['Лианозово',   3],
            ['Ломоносовский',   7],
            ['Лосиноостровский',    3],
            ['Люблино', 5],
            ['Марфино', 3],
            ['Марьина Роща',     3],
            ['Марьино', 5],
            ['Матушкино',   10],
            ['Метрогородок',    4],
            ['Мещанский',   1],
            ['Митино',  9],
            ['Можайский',   8],
            ['Молжаниновский',  2],
            ['Москворечье-Сабурово', 6],
            ['Нагатино-Садовники',  6],
            ['Нагатинский Затон', 6],
            ['Нагорный',    6],
            ['Некрасовка',  5],
            ['Нижегородский',   5],
            ['Ново-Переделкино', 8],
            ['Новогиреево', 4],
            ['Новокосино',  4],
            ['Обручевский', 7],
            ['Орехово-Борисово Северное',   6],
            ['Орехово-Борисово Южное',  6],
            ['Останкинский',    3],
            ['Отрадное',    3],
            ['Очаково-Матвеевское', 8 ],
            ['Перово',  4],
            ['Печатники',   5],
            ['Покровское-Стрешнево',    9],
            ['Преображенское',  4],
            ['Пресненский', 1],
            ['Проспект Вернадского', 8 ],
            ['Раменки', 8 ],
            ['Ростокино',   3],
            ['Рязанский',   5],
            ['Савёлки', 10],
            ['Савёловский', 2],
            ['Свиблово',    3],
            ['Северное Бутово', 7],
            ['Северное Измайлово',  4],
            ['Северное Медведково', 3],
            ['Северное Тушино', 9],
            ['Северный', 3],
            ['Силино', 10],
            ['Сокол', 2],
            ['Соколиная Гора',  4 ],
            ['Сокольники', 4],
            ['Солнцево', 8],
            ['Старое Крюково', 10],
            ['Строгино', 9],
            ['Таганский', 1],
            ['Тверской', 1],
            ['Текстильщики', 5],
            ['Тёплый Стан', 7],
            ['Тимирязевский', 2],
            ['Тропарёво-Никулино', 8],
            ['Филёвский Парк', 8],
            ['Фили-Давыдково', 8],
            ['Хамовники', 1],
            ['Ховрино', 2],
            ['Хорошёво-Мнёвники', 9],
            ['Хорошёвский', 2],
            ['Царицыно', 6],
            ['Черёмушки', 7],
            ['Чертаново Северное', 6],
            ['Чертаново Центральное', 6],
            ['Чертаново Южное', 6],
            ['Щукино', 9],
            ['Южное Бутово',  7],
            ['Южное Медведково', 3],
            ['Южное Тушино', 9],
            ['Южнопортовый', 5],
            ['Якиманка', 1],
            ['Ярославский', 3],
            ['Ясенево', 7],
            ['Троицк',  11],
            ['Щербинка', 11],
            ['Мосрентген', 11],
            ['Внуковское', 11],
            ['Вороновское', 11],
            ['Воскресенское', 11],
            ['Десёновское', 11],
            ['Киевский', 11],
            ['Клёновское', 11],
            ['Кокошкино', 11],
            ['Краснопахорское', 11],
            ['Марушкинское', 11],
            ['Михайлово-Ярцевское', 11],
            ['Московский',  11],
            ['Новофёдоровское', 11],
            ['Первомайское', 11],
            ['Роговское',   11],
            ['Рязановское', 11],
            ['Сосенское', 11],
            ['Филимонковское', 11],
            ['Щаповское', 11],
        ]);
    }

    public function safeDown() {
        $this->dropTable('{{%region}}');
    }
}
